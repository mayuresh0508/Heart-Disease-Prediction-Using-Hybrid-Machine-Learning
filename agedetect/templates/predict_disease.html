{% extends 'index.html' %}
{% load static %}
{% block body %}
{% if myheartdata %}
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Copse&display=swap" rel="stylesheet">

<style>
  table {
      border-collapse: collapse;
      width: 50px; /* Adjust the width as needed */
  }
  th, td {
      border: 1px solid black;
      padding: 8px;
      text-align: center;
  }
  th {
      background-color: #f2f2f2;
  }
  td{
    background-color: rgb(191, 191, 191);
  }

  .image{
		position: fixed;
		z-index: -1;
		height: 130vh;
		filter: blur(2px);

	}
  .white{
    color: white;
  }
  .box{
    padding-bottom: 30px !important;
  }
</style>

<!-- <img src="https://www.bhf.org.uk/-/media/news-images/2021/march/ai-heart-tool-640x410px.jpg?h=65%25&w=100%25&rev=c51b0b8af9d64101997bfd9252fb04a2&hash=D22AFDC9BCB488C861CFB81D348FCA33" alt="" style="background-attachment: fixed;" srcset=""> -->

<!-- background-image: url('https://www.bhf.org.uk/-/media/news-images/2021/march/ai-heart-tool-640x410px.jpg?h=65%25&w=100%25&rev=c51b0b8af9d64101997bfd9252fb04a2&hash=D22AFDC9BCB488C861CFB81D348FCA33'); background-size: cover; -->

	<section class="logins py-5 pb-0" >

    <img class="image" src="https://private-user-images.githubusercontent.com/83937509/319881091-62a32a28-0b78-4eb1-9549-9dab5c2eefeb.jpg?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MTU2MjQ1OTAsIm5iZiI6MTcxNTYyNDI5MCwicGF0aCI6Ii84MzkzNzUwOS8zMTk4ODEwOTEtNjJhMzJhMjgtMGI3OC00ZWIxLTk1NDktOWRhYjVjMmVlZmViLmpwZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNDA1MTMlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjQwNTEzVDE4MTgxMFomWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPWZiNTJlZTA0MDVjNDY3MjliYTM3MmQzMTI5ZWRkY2YyOWYwMTlmOWQ0MmZjMjdjODRlZmUxMzU4Yzg1ZTE4YzMmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0JmFjdG9yX2lkPTAma2V5X2lkPTAmcmVwb19pZD0wIn0.70w0FO2x8YXVXIswTEcQmjEQt9Bdab_xOntH5LenOys" alt="" srcset="">
		<div class="container py-xl-5 py-lg-3">
			<div class="title-section mb-md-5 mb-3">
				<h6 class="w3ls-title-sub" style="color:red"></h6>
				<h3 class="w3ls-title text-uppercase font-weight-bold" style="color: rgb(0, 0, 0);">Heart Prediction Output</h3><hr/>

                {% if myheartdata.result == 0 %}
                <div class="alert alert-success d-flex align-items-center" role="alert" style="justify-content: center; background-color: rgb(180, 255, 181); height: 50px;">
                    <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Success:"><use xlink:href="#check-circle-fill"/></svg>
                    <div style="font-size: 20px; font-weight: bold;">
                      Hooray! You are Healthy Person &#128515
                    </div>
                  </div>
                {% else %}
                  <div class="alert alert-danger d-flex align-items-center" role="alert">
                      <svg class="bi flex-shrink-0 me-2" width="24" height="24" role="img" aria-label="Danger:"><use xlink:href="#exclamation-triangle-fill"/></svg>
                      <div>
                          You are Unhealthy, Need to Checkup! Plz Consult a Doctor Immediately. &#128567
                      </div>
                  </div>
                {% endif %}
                <hr/>
			<div class="login px-sm-12" style="width:100%; " >
                <!-- <h4 style="font-weight: 600; font-size: 20px; color: #34495e;margin-top: 5px; display: flex; justify-content: center;"><b>Result is:</b>   {% if myheartdata.result == 0 %}
                    <span style='color:green'>You Are Healthy Person.</span>
                    {% else %}
                    <span style='color:red'>You Are Unhealthy Person, Need to Checkup.</span>
                    {% endif %}</h4> -->
                    
                    <div class="box" style="background-color: white; margin-bottom: 50px; border-radius: 5px; box-shadow: 10px 10px 10px #3d3d3d; padding: 0;">
                      <div class="model" style="display: flex; justify-content: space-around;"> 
                        <h5 style="font-weight: 600; font-size: 20px; color: #000000;margin-top: 10px;"><b>Accuracy of Logistic Regression Model is:</b> <span style=" font-family: 'Copse', serif; font-weight: 700; font-style: normal;" id="logisticaccuracy">{{ myheartdata.prediction_accuracy_logisticregression }}%</span></h5>
  
                        <h5 style="font-weight: 600; font-size: 20px; color: #000000;margin-top: 10px;"><b>Accuracy of Gradient Boosting Model is:</b> <span style=" font-family: 'Copse', serif; font-weight: 700; font-style: normal; " id = "gradientaccuracy">{{ myheartdata.prediction_accuracy_gradientboosting }}%</span></h5>
                      </div>
  
                      <div class="model" style="display: flex; justify-content: space-around;">
                        <h4>Logistic Regression Confusion Matrix</h4>
  
                        <h4>Gradient Boosting Confusion Matrix</h4>
  
                      
                      </div>
  
                      <div class="model" style="display: flex; justify-content: space-around;"> 
                        <table>
                          <tr>
                              <th></th>
                              <th>Predicted Negative</th>
                              <th>Predicted Positive</th>
                          </tr>
                          <tr>
                              <th>Actual Negative</th>
                              <td>{{ logi.z_z }}</td>
                              <td>{{ logi.z_o }}</td>
                          </tr>
                          <tr>
                              <th>Actual Positive</th>
                              <td>{{ logi.o_z }}</td>
                              <td>{{ logi.o_o }}</td>
                          </tr>
                      </table>
                  
                  
                      <table>
                          <tr>
                              <th></th>
                              <th>Predicted Negative</th>
                              <th>Predicted Positive</th>
                          </tr>
                          <tr>
                              <th>Actual Negative</th>
                              <td>{{grab.z_z}}</td>
                              <td>{{grab.z_o}}</td>
                          </tr>
                          <tr>
                              <th>Actual Positive</th>
                              <td>{{grab.o_z}}</td>
                              <td>{{grab.o_o}}</td>
                          </tr>
                      </table>
                      </div>
  
                  <h5 style="font-weight: 500; font-size: 30px; color: #000000;margin-top: 10px;display: flex; justify-content: center;"><b>Accuracy of Hybrid Model is :</b> <span style=" font-family: 'Copse', serif; font-weight: 700; font-style: normal; padding-left: 5px;" id = "hybridaccuracy"> {{ myheartdata.prediction_accuracy }}%</span></h5>
  
                  <h4 style="display: flex; justify-content: center;">Hybrid Model Confusion Matrix</h4>
  
                  <div style="display: flex; justify-content: center;">
                    <table>
                      <tr>
                          <th></th>
                          <th>Predicted Negative</th>
                          <th>Predicted Positive</th>
                      </tr>
                      <tr>
                          <th>Actual Negative</th>
                          <td>{{hybr.z_z}}</td>
                          <td>{{hybr.z_o}}</td>
                      </tr>
                      <tr>
                          <th>Actual Positive</th>
                          <td>{{hybr.o_z}}</td>
                          <td>{{hybr.o_o}}</td>
                      </tr>
                  </table>
                  </div>
                    </div>

                <!-- <h5 style="font-weight: 600; font-size: 20px; color: #34495e;margin-top: 10px;"><b>Confusion Matrix of Logistic Regression Model is:</b> <span style="    font-family:  sans-serif;" id="logisticaccuracy">{{ myheartdata.prediction_cm_logisticregression }}%</span></h5>
                <div>
                <h1>Confusion Matrix</h1>
                <h2>{{ confusion_matrix }}</h2>
              </div> -->
                
                 
             
                      
                  
                <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                    <symbol id="check-circle-fill" fill="currentColor" viewBox="0 0 16 16">
                      <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
                    </symbol>
                    <symbol id="info-fill" fill="currentColor" viewBox="0 0 16 16">
                      <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z"/>
                    </symbol>
                    <symbol id="exclamation-triangle-fill" fill="currentColor" viewBox="0 0 16 16">
                      <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
                    </symbol>
                  </svg>
                  
                    <div class="row my-4">
                      <div class="col-md-6" >
                        <div style="background-color: #ffffff; background-size: cover; background-position: center; padding: 15px; padding-right: 20px; border-radius: 8px; box-shadow: 10px 10px 10px #3d3d3d;">
                          <h5 style="font-weight: 600; font-size: 22px; color: #34495e; margin-bottom: 20px;">Representation of Logistic & Gradient Boosting Model<hr/></h5>
                          <div style="margin-top: 22px; ">
                            <!-- <h4 style="font-weight: 600; font-size: 20px; color: #34495e;"> :<hr/></h4> -->
		
                            <img src="{{ myheartdata.accuracy_output.url }}" style="width: 100%; max-width: 400px; height: 400px; border: 2px; border-radius: 8px; display: block; margin: 0 auto;">
                            
                          </div>
                        </div>
                      </div>
                      <div class="col-md-6" style="box-shadow: 10px 10px 10px #3d3d3d; padding: 0;">
                        <div style="background-color: #ffffff; background-size: cover; background-position: center; padding: 15px; border-radius: 8px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);">
                          <h5 style="font-weight: 600; font-size: 22px; color: #34495e; margin-bottom: 20px;">Representation of Hybrid Model Accuracy <hr/></h5>
                          <div style="margin-top: 22px; ">
                            <!-- <h4 style="font-weight: 600; font-size: 20px; color: #34495e;"><hr/></h4> -->
                            <!-- <div id="chart_div" style="width: 100%; height: 500px;"></div> -->
                            <div id="line_top_x" style="width: 600px; height: 400px;"></div>
                          </div>
                        </div>
                      </div>
                  </div>
                  

			</div>
            {% if myheartdata.result != 0 %}

            <div class="container" style="width:100%;margin-top:3%">
                    <div class="container">
                        <h3 align="center" style="font-weight:bold;font-family : 'roman' ; color : black ;margin-top:4%">You may contact this Doctor</h3>
                         </div><hr>
                                <table id="example" class="display" style="width:100%">
                                  <thead>
                                    <tr>
                                      <th>#</th>
                                      <th>Image</th>
                                      <th>Full Name</th>
                                      <th>Email</th>
                                      <th>Contact</th>
                                      <th>Address</th>

                                  </tr>
                              </thead>
                              <tbody>
                              
                                <tr>
                                  <td ><b>1. </b></td>
                                  <td><img src="{% static 'img/doctors/doctors-4.jpg' %}" style="width:80px;height:90px"></td>
                                  <td style=" font-weight: bold;  font-family: 'YourChosenFont', sans-serif;">Sejal Devlikar</td>
                                  <td style=" font-weight: bold;  font-family: 'YourChosenFont', sans-serif;">s.devlikar@gmail.com</td>
                                  <td style=" font-weight: bold;  font-family: 'YourChosenFont', sans-serif;">8805703473</td>
                                  <td style=" font-weight: bold;  font-family: 'YourChosenFont', sans-serif;"> ICON Hosptital </td>
                              </tr>
                              <tr>
                                <td><b>2. </b></td>
                                <td style=" font-weight: bold;  font-family: 'YourChosenFont', sans-serif;"><img src="{% static 'img/doctors/doctors-3.jpg' %}" style="width:80px;height:90px"></td>
                                <td style=" font-weight: bold;  font-family: 'YourChosenFont', sans-serif;">Dr. Deepak Shelke</td>
                                <td style=" font-weight: bold;  font-family: 'YourChosenFont', sans-serif;">deepak.shelke@gmail.com</td>
                                <td style=" font-weight: bold;  font-family: 'YourChosenFont', sans-serif;">9805703473</td>
                                <td style=" font-weight: bold;  font-family: 'YourChosenFont', sans-serif;">City Hospital </td>
                            </tr>
                            <tr>
                                <td><b>2. </b></td>
                                <td style=" font-weight: bold;  font-family: 'YourChosenFont', sans-serif;"><img src="{% static 'img/doctors/doctors-1.jpg' %}" style="width:80px;height:90px"></td>
                                <td style=" font-weight: bold;  font-family: 'YourChosenFont', sans-serif;">Dr. Manish Ahuja</td>
                                <td style=" font-weight: bold;  font-family: 'YourChosenFont', sans-serif;">m.ahuja@gmail.com</td>
                                <td style=" font-weight: bold;  font-family: 'YourChosenFont', sans-serif;">9805703453</td>
                                <td style=" font-weight: bold;  font-family: 'YourChosenFont', sans-serif;">Asian Heart Institute</td>
                            </tr>
                           
                          </tbody>
                      </table>
                  </div>
            {% endif %}
		</div>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      var logistic_accuracy = document.getElementById('logisticaccuracy');
      var logisticAccuracyValue = logistic_accuracy.innerText;
      var gradient_accuracy = document.getElementById('gradientaccuracy');
      var gradientAccuracyValue = gradient_accuracy.innerText;
      var hybrid_accuracy = document.getElementById('hybridaccuracy');
      var hybridAccuracyValue = hybrid_accuracy.innerText;
      console.log(logisticAccuracyValue);
      google.charts.load('current', {'packages':['line']});
      google.charts.setOnLoadCallback(drawChart);

    function drawChart() {

      var data = new google.visualization.DataTable();
      data.addColumn('number', 'Models Accuracy Comparison');
      data.addColumn('number', 'Logistic Regression');
      data.addColumn('number', 'Gradient Boosting');
      data.addColumn('number', 'Hybrid Model');

      data.addRows([
      [0,  0, 0, 0],                                        // Base values
  [1,  10, 20, 30],                                     // Sample values
  [2,  20, 40, 50],  
        [3,  parseFloat(logisticAccuracyValue), parseFloat(gradientAccuracyValue), parseFloat(hybridAccuracyValue)],
      ]);

      var options = {
        
        width: 610,
        height: 400,
        axes: {
          x: {
            0: {side: 'bottom'}
          }
        }
      };

      var chart = new google.charts.Line(document.getElementById('line_top_x'));

      chart.draw(data, google.charts.Line.convertOptions(options));
    }
  </script>
	</section>
{% endif%}
{% endblock %}
